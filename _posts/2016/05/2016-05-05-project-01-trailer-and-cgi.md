---  
layout: post  
title: 年轻司机介绍补预告片系统与cgi
description:  作为一个年轻的司机，　来公司已经两年了。刚来的时候，做了补预告片系统，现在简单介绍一下.    
updateData:  00:22 2016/05/05
categories: [程序人生]
published: false
---  

## 概要

这篇文章简单的记录做的一个简单的系统, 并介绍一下cgi相关的知识点.  


## 项目背景

视频是一个用户粘性很低的行业.  
而我们在这个行业刚开始做, 很多视频内容都不完善, 即只有一个空专辑(比如XX电影).  
对于往年的电影 如果现在去花钱买那些版权收益也不大.  
但是一个电影的预告片往往是不需要版权的, 所以这里就希望可以对往年的电影补充预告片, 这样用户进到这个专辑, 至少可以看几分钟宣传内容.  
 

## 项目介绍

这个项目的目的是给空专辑补充预告片.  
这里分两个分支:  
1. 已经有空专辑和预告片视频了. 我们需要通过某种方法识别他们(豆瓣ID), 然后关联起来.  
2. 只有一个空专辑, 没有预告片. 我们需要去互联网上抓取预告片, 然后关联起来.  

系统的架构图大概如下:  

![](http://tiankonguse.com/lab/cloudLink/baidupan.php?url=/1915453531/449928177.png)  


## 项目实现

项目实际上分为几个模块(实际项目中对步骤进行调整优化了).  
 

1. 把空专辑与单视频通过豆瓣ID关联起来.  
   大概步骤如下:  
   1). 从A表中找到符合指定条件的空专辑  
   2). 从B表中找到专辑对应的豆瓣ID, 做豆瓣ID到专辑的反向关系(存在多个时, 保留最后一个专辑)   
   3). 从C表找到符合条件的单视频  
   4). 从D表找到单视频对应的豆瓣ID, 做豆瓣ID到视频的反向关系(存在多个时, 全部保留)
   5). 扫表专辑的豆瓣ID列表, 在视频列表中看是否存在, 存在则把关系保存起来  
   6). 把找到的专辑和视频通过接口关联起来.  
   
2. 对于没关联的空专辑抓取视频
    这个步骤看上面的流程图就很清晰了.  
    
 
 

## cgi介绍

cgi介绍  

## 结语

结语  





