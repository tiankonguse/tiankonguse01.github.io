---
layout: post
title: ShellShock CVE-2014-6271 漏洞及紧急修复方法
description: 一个被指比“心脏出血”还要严重的Linux安全漏洞被发现，尽管还没有发现利用该漏洞进行的攻击，但是比“心脏出血”更低的操作门槛让它比前者更加危险。
keywords: ShellShock, 漏洞, 修复, 安全, linux
tags: ShellShock 漏洞 修复 安全 linux
categories: [程序人生]
---



## 漏洞问题

一个被指比“心脏出血”还要严重的Linux安全漏洞被发现，尽管还没有发现利用该漏洞进行的攻击，但是比“心脏出血”更低的操作门槛让它比前者更加危险。

>   GNU Bash through 4.3 processes trailing strings after function definitions in the values of environment variables, which allows remote attackers to execute arbitrary code via a crafted environment, as demonstrated by vectors involving the ForceCommand feature in OpenSSH sshd, the mod_cgi and mod_cgid modules in the Apache HTTP Server, scripts executed by unspecified DHCP clients, and other situations in which setting the environment occurs across a privilege boundary from Bash execution.


## 如何验证漏洞存在

```
env x='() { :;}; echo vulnerable' bash -c 'echo hello'
```

在终端中运行上面的命令，如果返回有vulnerable，就说明这台电脑中枪了。
把命令中的bash替换成其他类型的shell，可以检查机器上其他shell是否中枪。



## 修复Bug

* GNU官方补丁所在地址：[http://seclists.org/oss-sec/2014/q3/650][seclists]
* OS X下修复Bug的方法：[http://apple.stackexchange.com/questions/146849/how-do-i-recompile-bash-to-avoid-the-remote-exploit-cve-2014-6271][apple]
* Debian： 查看 [https://www.debian.org/security/2014/dsa-3032][Debian]
* Ubuntu：查看 [http://www.ubuntu.com/usn/usn-2362-1/][Ubuntu]
* CentOS: yum -y update bash
* Fedora: 查看 [https://bugzilla.redhat.com/show_bug.cgi?id=CVE-2014-6271][Fedora]
* Novel/SuSE: 查看 [http://support.novell.com/security/cve/CVE-2014-6271.html][SuSE]
* 其他发行版也可以参照上面的方法自行编译，或者通过发行版内置的包管理器来更新bash。




[seclists]: http://seclists.org/oss-sec/2014/q3/650
[apple]: http://apple.stackexchange.com/questions/146849/how-do-i-recompile-bash-to-avoid-the-remote-exploit-cve-2014-6271
[Debian]: https://www.debian.org/security/2014/dsa-3032
[Ubuntu]: http://www.ubuntu.com/usn/usn-2362-1/
[Fedora]: https://bugzilla.redhat.com/show_bug.cgi?id=CVE-2014-6271
[SuSE]: http://support.novell.com/security/cve/CVE-2014-6271.html
